/* 追加：パネル色を変数化（黒に近い灰色） */
:root {
  --panel-bg: #0f1216;              /* 設定パネルの背景色 */
  --panel-border: rgba(255,255,255,.14);
  --panel-border-hover: rgba(255,255,255,.28);
}

html, body {
  height: 100%;
  margin: 0;
  background: radial-gradient(1200px 600px at 50% 70%, #0b0f1c, #02040a 60%, #000 100%);
  overflow: hidden;
  touch-action: manipulation; /* avoid double-tap zoom on mobile */
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  color: #ddd;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}
#canvas {
  width: 100%;
  height: 100%;
  display: block;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1; /* 追加: ボタンより低くする */
}
.hint {
  position: fixed;
  inset: auto 12px 12px 12px;
  text-align: center;
  font-size: 14px;
  opacity: .7;
  pointer-events: none;
}
.settingBtn,
.top-left-btn,
.btn-settings {
  position: fixed;
  top: 16px;
  left: 16px;
  z-index: 10;
  background: var(--panel-bg);               /* ← 統一 */
  border: 1px solid var(--panel-border);
  color: #eee;
  border-radius: 6px;
  padding: 8px 20px;
  font-size: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,.35);    /* 視認性のための軽い影 */
  cursor: pointer;
  opacity: 0.92;
  transition: background 0.2s, border-color 0.2s;
}
.settingBtn:hover,
.top-left-btn:hover,
.btn-settings:hover {
  background: var(--panel-bg);
  border-color: var(--panel-border-hover);
  opacity: 1;
}
/* 設定パネル（左1/4・キャンバス上） */
.settings-panel {
  position: fixed; top: 0; left: 0; height: 100vh;
  width: clamp(240px, 25vw, 400px); /* 左1/4の目安 */
  background: var(--panel-bg);            /* 変数で統一 */
  color: #eee;
  box-shadow: 6px 0 24px rgba(0,0,0,.6);
  transform: translateX(-100%);    /* 初期は隠す */
  transition: transform .25s ease;
  z-index: 9;                   /* キャンバスより前 */
  display: flex; flex-direction: column;
}
.settings-panel[aria-hidden="false"] {
  transform: translateX(0);        /* 表示 */
}

.panel-header { padding: 14px 16px 6px; }
.panel-title-wrap { display: flex; align-items: center; gap: 8px; }
.count-badge {
  display: inline-flex; align-items: center; justify-content: center;
  min-width: 38px; height: 22px; padding: 0 6px;
  font-size: 12px; border-radius: 999px;
  background: rgba(255,255,255,.1); border: 1px solid var(--panel-border);
}
.panel-rules { margin: 6px 0 0; font-size: 12px; opacity: .8; }

/* 上部操作バー（固定） */
.toolbar {
  position: sticky; top: 0; z-index: 1;
  display: grid; grid-template-columns: auto 1fr auto 1fr; gap: 10px; align-items: center;
  padding: 10px 12px; background: var(--panel-bg);
  border-top: 1px solid var(--panel-border);
  border-bottom: 1px solid var(--panel-border);
}
.toolbar input[type="color"] {
  width: 44px; height: 32px; padding: 0; border: 1px solid var(--panel-border);
  background: #0000; border-radius: 8px;
}
.toolbar input[type="text"] {
  width: 100%; height: 32px; padding: 6px 10px;
  border-radius: 8px; border: 1px solid var(--panel-border);
  background: rgba(255,255,255,.06); color: #eee;
}
.btn {
  background: rgba(255,255,255,.08); color: #eee; border: 1px solid var(--panel-border);
  padding: 8px 12px; border-radius: 8px; cursor: pointer;
}
.btn.primary { background: #2e7dff; border-color: #4e90ff; color: white; }
.btn:disabled { opacity: .5; cursor: not-allowed; }
.error { color: #ff8b8b; font-size: 12px; min-height: 1em; }

/* リスト領域 */
.panel-body { padding: 10px 12px 12px; overflow-y: auto; }
.color-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }

/* 行（ドラッグハンドル + スウォッチ + HEX + 削除ボタン） */
.color-row {
  display: grid;
  grid-template-columns: 36px 32px 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 10px;
  border: 1px solid var(--panel-border);
  background: rgba(255,255,255,.04);
}
.drag-handle {
  width: 32px; height: 32px;
  display: inline-flex; align-items: center; justify-content: center;
  border: 1px dashed rgba(255,255,255,.2); border-radius: 8px;
  background: rgba(255,255,255,.03); color: #aaa; cursor: grab;
}
.swatch {
  width: 28px; height: 28px; border-radius: 6px;
  border: 1px solid rgba(255,255,255,.25);
  background: var(--sw, #fff);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.2);
}
.hex { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size: 13px; opacity: .9; }
.remove-btn {
  padding: 6px 10px; border-radius: 8px; cursor: pointer;
  background: rgba(255,255,255,.08); color: #eee; border: 1px solid var(--panel-border);
}
.remove-btn:disabled { opacity: .5; cursor: not-allowed; }
.panel-footer { padding: 12px; border-top: 1px solid var(--panel-border); display: flex; justify-content: flex-end; }